generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Application {
  id                                  String    @id @default(cuid())
  userId                              String    @unique
  disabilities                        String?
  services                            String?
  otherText                           String?
  details                             String?
  createdAt                           DateTime  @default(now())
  updatedAt                           DateTime  @updatedAt
  adminNotes                          String?
  handicapDocUrl                      String?
  identityDocUrl                      String?
  medicalDocUrl                       String? // Added for medical documentation
  status                              String    @default("PENDING")
  verifiedAt                          DateTime?
  verifiedById                        String?
  User_Application_userIdToUser       User      @relation("Application_userIdToUser", fields: [userId], references: [id])
  User_Application_verifiedByIdToUser User?     @relation("Application_verifiedByIdToUser", fields: [verifiedById], references: [id])

  @@index([status])
}

model User {
  id                                         String        @id
  email                                      String        @unique
  firstName                                  String?
  lastName                                   String?
  dateOfBirth                                DateTime?
  phone                                      String?
  addressLine1                               String?
  addressLine2                               String?
  city                                       String?
  province                                   String?
  postalCode                                 String?
  createdAt                                  DateTime      @default(now())
  updatedAt                                  DateTime
  role                                       String        @default("USER")
  Application_Application_userIdToUser       Application?  @relation("Application_userIdToUser")
  Application_Application_verifiedByIdToUser Application[] @relation("Application_verifiedByIdToUser")
}
